<!DOCTYPE html>
<html lang="nl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PotVolGoesting - Wa eten we vandaag?</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@400;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/style.css?v=2">
</head>

<body class="min-h-screen flex flex-col p-4 md:p-8">

    <!-- Main Container -->
    <main
        class="max-w-md w-full mx-auto bg-white/90 backdrop-blur-sm rounded-3xl shadow-xl overflow-hidden border border-orange-50 flex-grow flex flex-col">

        <!-- Header -->
        <header class="bg-gradient-to-br from-[#d32f2f] to-[#b71c1c] p-6 text-center relative overflow-hidden">
            <div
                class="absolute inset-0 opacity-10 bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PGNpcmNsZSBjeD0iMiIgY3k9IjIiIHI9IjIiIGZpbGw9IiNmZmYiLz48L3N2Zz4=')]">
            </div>
            <h1 class="font-bomma text-4xl text-white mb-2 relative z-10 drop-shadow-md">PotVolGoesting</h1>
            <p class="text-red-100 font-semibold text-lg relative z-10">Wa eten we vandaag, schatteke?</p>
        </header>

        <!-- Controls -->
        <section class="p-6 space-y-4">

            <!-- Health Filter -->
            <div class="space-y-2">
                <div class="flex justify-between items-center">
                    <label for="healthSlider" class="font-bold text-gray-700">
                        Gezondheidsmeter
                    </label>
                    <span id="healthDisplay"
                        class="bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full font-bold ml-auto">Goe
                        gebalanceerd (5)</span>
                </div>
                <input type="range" id="healthSlider" min="0" max="10" value="0" class="w-full">
                <div class="flex justify-between text-xs text-gray-400 font-bold uppercase">
                    <span>Maakt nie uit (0)</span>
                    <span>Gezond (10)</span>
                </div>
            </div>

            <!-- Tag Filters (Accordion) -->
            <div class="mt-4 border-t border-gray-100 pt-3">
                <button id="tagFilterToggle"
                    class="w-full flex justify-between items-center text-gray-500 font-bold text-sm bg-gray-50 px-4 py-3 rounded-xl border border-gray-100 hover:bg-orange-50 hover:text-orange-600 transition-colors">
                    <span class="flex items-center gap-2">ğŸ·ï¸ <span>Dieet & Voorkeuren</span></span>
                    <span id="tagFilterIcon" class="transition-transform duration-300 transform rotate-0">â–¼</span>
                </button>
                <div id="tagFilterContent" class="hidden overflow-hidden transition-all duration-300 mt-2">
                    <div id="tagFilterContainer" class="flex flex-wrap gap-2 py-2 px-1 w-full custom-scrollbar">
                        <!-- Tags will be dynamically injected here -->
                    </div>
                </div>
            </div>
            <!-- Action Buttons -->
            <div class="grid grid-cols-2 gap-3 mt-4">
                <button id="btnSmart"
                    class="btn-bomma rounded-xl py-4 font-bold text-lg flex flex-col items-center justify-center gap-1">
                    <span class="text-2xl">ğŸ²</span>
                    <span>Zoek met Goesting</span>
                </button>
                <button id="btnChaos"
                    class="btn-chaos rounded-xl py-4 font-bold text-lg flex flex-col items-center justify-center gap-1 transition-all">
                    <span class="text-2xl">ğŸŒªï¸</span>
                    <span>Gij Beslist!</span>
                </button>
            </div>
            <button id="fridayToggle"
                class="w-full text-center text-xs text-gray-400 font-bold py-2 rounded-lg border border-gray-100 bg-gray-50 flex items-center justify-center gap-2 transition-colors hover:bg-gray-100">
                <span class="grayscale opacity-50 transition-all font-normal text-sm" id="fridayEmoji">ğŸŸ</span>
                <span id="fridayText">Frietdag (Uit)</span>
            </button>
        </section>

        <!-- Results Area -->
        <section class="bg-gray-50 flex-grow p-6 border-t border-gray-100 relative">

            <!-- Initial State -->
            <div id="emptyState"
                class="h-full flex flex-col items-center justify-center text-center text-gray-400 space-y-3 opacity-100 transition-opacity duration-300">
                <span class="text-5xl">ğŸ‘µğŸ¼</span>
                <p class="text-lg">Druk op een knop om te zien<br>wa we gaan eten!</p>
            </div>

            <!-- Results Containers -->
            <div id="resultArea" class="space-y-4 relative z-10 w-full min-h-[400px]">

                <!-- Cooking Animation Container (NEW) -->
                <div id="cookingAnimation"
                    class="hidden h-full w-full flex-col items-center justify-center text-center absolute inset-0 z-20 bg-gray-50 rounded-xl">
                    <div class="relative w-48 h-48 sm:w-64 sm:h-64 mb-4">
                        <svg width="100%" height="100%" viewBox="0 0 100 100" class="overflow-visible" id="potSvg">
                            <!-- Pot Handles -->
                            <circle cx="15" cy="65" r="12" fill="none" stroke="#271815" stroke-width="6" />
                            <circle cx="85" cy="65" r="12" fill="none" stroke="#271815" stroke-width="6" />
                            <!-- Pot Base -->
                            <path d="M 12 48 L 88 48 C 88 95, 12 95, 12 48 Z" fill="#3e2723" />
                            <!-- Pot Lid (Separated for animation) -->
                            <g id="potLid">
                                <!-- Lid Dome -->
                                <path d="M 8 48 C 8 10, 92 10, 92 48 Z" fill="#d32f2f" />
                                <!-- Lid Handle -->
                                <rect x="38" y="8" width="24" height="10" rx="5" fill="#b71c1c" />
                            </g>
                        </svg>
                    </div>
                    <p class="font-bomma text-xl sm:text-2xl text-red-800 animate-pulse">Efkes roeren...</p>
                </div>
                <!-- Modus A: De Snelle Spinner -->
                <div id="spinnerView" class="hidden space-y-4">
                    <p class="text-xs font-bold text-gray-400 uppercase tracking-widest text-center mb-2">De Bomma
                        suggereert...</p>
                    <div id="spinnerCarousel" class="flex flex-col gap-4">
                        <!-- 5 suggestion cards -->
                    </div>
                </div>

                <!-- Modus B: De Mixer Slot Machine -->
                <div id="mixerView" class="hidden space-y-4">
                    <div id="mixerSlots" class="grid grid-cols-3 gap-2">
                        <!-- Protein Slot -->
                        <div id="slot-0"
                            class="slot-card bg-white rounded-xl p-2 shadow-sm border border-gray-100 flex flex-col items-center text-center gap-2 relative overflow-visible">
                            <!-- Dynamically filled -->
                        </div>
                        <!-- Carb Slot -->
                        <div id="slot-1"
                            class="slot-card bg-white rounded-xl p-2 shadow-sm border border-gray-100 flex flex-col items-center text-center gap-2 relative overflow-visible">
                            <!-- Dynamically filled -->
                        </div>
                        <!-- Veggie Slot -->
                        <div id="slot-2"
                            class="slot-card bg-white rounded-xl p-2 shadow-sm border border-gray-100 flex flex-col items-center text-center gap-2 relative overflow-visible">
                            <!-- Dynamically filled -->
                        </div>
                    </div>

                    <!-- Full Dish Overlay (Triggered if Mixer rolls a full dish) -->
                    <div id="mixerFullOverlay" class="hidden">
                        <!-- Single wide card -->
                    </div>
                </div>

                <!-- Legacy Meal Container (Fallbacks) -->
                <div id="mealContainer" class="hidden"></div>
            </div>

            <!-- Bomma Tip -->
            <div id="bommaTipContainer" class="hidden mt-6">
                <div class="flex items-start gap-3">
                    <div class="text-4xl shrink-0 mt-2">ğŸ‘µğŸ¼</div>
                    <div class="bomma-tip-bubble p-4 shadow-sm w-full">
                        <p class="text-sm font-bold text-orange-800 mb-1">De Bomma zegt:</p>
                        <p id="bommaTipText" class="text-gray-700 italic text-sm">"Vergeet uw sauske ni hÃ¨!"</p>
                    </div>
                </div>
            </div>

        </section>

        <!-- Mixer Selection Modal -->
        <div id="mixerModal"
            class="hidden fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex justify-center items-end p-4 md:items-center">
            <div class="bg-white rounded-3xl w-full max-w-md max-h-[80vh] flex flex-col shadow-2xl overflow-hidden transform transition-transform translate-y-full"
                id="mixerModalContent">
                <!-- Header -->
                <div
                    class="bg-gradient-to-br from-[#d32f2f] to-[#b71c1c] p-4 text-white flex justify-between items-center shrink-0">
                    <div>
                        <h2 class="font-bomma text-2xl drop-shadow-sm" id="mixerModalTitle">Kies uw ingrediÃ«nt</h2>
                        <p class="text-xs text-red-100 italic">Voldoet aan uw filters</p>
                    </div>
                    <button id="closeMixerModal"
                        class="text-white hover:bg-white/20 p-2 rounded-full transition-colors text-xl font-bold leading-none h-10 w-10 flex items-center justify-center">
                        âœ•
                    </button>
                </div>
                <!-- Scrollable List -->
                <div id="mixerModalList" class="flex-grow overflow-y-auto p-4 space-y-2 bg-gray-50">
                    <!-- Populated via JS -->
                </div>
            </div>
        </div>
    </main>

    <!-- Scripts -->
    <script src="js/engine.js?v=16"></script>
    <script src="js/app.js?v=16"></script>
</body>

</html>